<!DOCTYPE html>
<html>
<head>
<title>Test</title>
</head>

<body>
<input type="file" id="files" name="file" />
<div id="byte_content"></div>

<merde id="merde"></merde>


<script>
function listener() {
	var file = document.getElementById("files").files[0];
	var reader = new FileReader();

	reader.onloadend = function(evt) {
		if (evt.target.readyState == FileReader.DONE) {
			// document.getElementById('byte_content').textContent = evt.target.result;
			var pattern = /\s+/;
			var array = evt.target.result.split(pattern);

			pattern = /^[A-Z]+$/;

			var count1 = [];
			var count2 = [];
			var count3 = [];
			// console.log(array);
			var list = document.createElement("ul");
			var body = document.body;
			body.appendChild(list);

			var merde = document.getElementById("merde");

			for (var i = 1; i < array.length; i++) {
				// var tmp = document.createElement("li");


				if (array[i][0] == '$') {
					// count1.push(array[i - 1]);
					// count2.push(array[i]);
					// count3.push(array[i + 1]);
					count1[array[i]] = array[i + 2];

					// list.removeChild(list.lastChild);
					i += 2;
				}
				else if (pattern.test(array[i]) && array[i].toString() != "EOF") {

					count2.push(array[i - 1].toString() + ":" + array[i].toString() + "\t\t\t\t" + array[i + 1].toString() + ":" + array[i + 2].toString());
					var tmp = document.createElement(array[i]);
					merde.appendChild(tmp);
				}
				else {
					;
				}
					count3.push(array[i]);
					// tmp.textContent = array[i];
					// list.appendChild(tmp);
			};


			console.log(count1);
			console.log(count2);
			console.log(count3);
		}
	};

	reader.readAsBinaryString(file);
}

document.getElementById("files").addEventListener("change", listener);
</script>
</body>

</html>
